
// !!! SAVE LOCAL DATA
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////


// Key used to save this section's data in localStorage
const storageKey = "form_section_a";

// Form ID
const formId = "personal_detail";

// Load saved data on page load
window.addEventListener("DOMContentLoaded", () => {
  const savedData = localStorage.getItem(storageKey);
  if (savedData) {
    const formData = JSON.parse(savedData);
    Object.keys(formData).forEach((key) => {
      const input = document.getElementById(key);
      if (input) {
        input.value = formData[key];
      }
    });
  }
});

// Save form data on any input change
document.getElementById(formId).addEventListener("input", () => {
  const inputs = document.querySelectorAll(`#${formId} input, #${formId} textarea, #${formId} select`);
  const data = {};
  inputs.forEach((input) => {
    data[input.id] = input.value;
  });
  localStorage.setItem(storageKey, JSON.stringify(data));
});

// Save data and navigate when "Next" button (as <a>) is clicked
document.getElementById("nextBtn").addEventListener("click", (e) => {
  e.preventDefault(); // Prevent the <a> from navigating right away

  const inputs = document.querySelectorAll(`#${formId} input, #${formId} textarea, #${formId} select`);
  const data = {};
  inputs.forEach((input) => {
    data[input.id] = input.value;
  });
  localStorage.setItem(storageKey, JSON.stringify(data));

  // Navigate to the next section
  window.location.href = "section_b.html";
});
